# for MYSQL:
# 前缀M_表示是从hive同步来的数据
# 前缀T_表示永存临时表


#1.m_r_amount
CREATE TABLE IF NOT EXISTS M_R_AMOUNT (
 BRAND VARCHAR(200) COMMENT '品牌',
 MODEL VARCHAR(200) COMMENT '型号',
 ASPECT VARCHAR(200) COMMENT '评价纬度',
 ATTR VARCHAR(200),
 CATEGORY_VAL VARCHAR(200) COMMENT '评价得分值',
 AMOUNT VARCHAR(200) COMMENT 'sum总数',
 CREATED_DT VARCHAR(200)
) COMMENT '商品标签表，对同一商品从不同纬度的评价';


#2.m_prod_comms
CREATE TABLE IF NOT EXISTS M_PROD_COMMS (
 CRAWL_DATE VARCHAR(200) COMMENT '爬取时间',
 ID VARCHAR(200) COMMENT '评论ID',
 PARENT_ID VARCHAR(200) COMMENT '父ID,本表自循环，关联ID',
 PROD_ID VARCHAR(200) COMMENT '评论所属商品ID',
 COMM_INFO TEXT COMMENT '评论内容',
 COMM_TIME VARCHAR(200) COMMENT '买家评论时间',
 COMM_TAGS VARCHAR(1000) COMMENT '评论标签',
 COMM_REPLY_AMOUNT TEXT COMMENT '评论回复',
 COMM_PRAISE_COUNT INT COMMENT '评论被赞数量',
 PUBLISHER_INFO VARCHAR(200) COMMENT '评论发布人信息',
 PROD_INFO VARCHAR(1000) COMMENT '该评论针对的购买信息',
 CREATED_DT VARCHAR(200)
) COMMENT '商品评论表，内部表，以写入当天日期分区存储（如20151107）';


#3.m_prod_info
CREATE TABLE IF NOT EXISTS M_PROD_INFO (
 CRAWL_DATE VARCHAR(1000) COMMENT '爬取时间',
 SOURCE VARCHAR(1000) COMMENT '数据来源，如JD.COM，TMALL.COM',
 PROD_ID VARCHAR(200) COMMENT '商品ID',
 NAME VARCHAR(1000) COMMENT '商品销售名',
 PRICE FLOAT,
 BRAND VARCHAR(200) COMMENT '品牌',
 MODEL VARCHAR(200) COMMENT '型号',
 COLOR VARCHAR(200),
 CAPACITY VARCHAR(200),
 SCREEN_SIZE VARCHAR(200),
 COMM_AMOUNT INT COMMENT '累计评价,如果不能爬到就先空，计算时自己统计',
 COMM_GOOD_AMOUNT INT COMMENT '好评率 PRAISE RATE 与描述相符||好评度，存4位整数，2120 = 21.20%',
 COMM_BAD_AMOUNT INT COMMENT '差评，存4位整数，2120 = 21.20%',
 COMM_MIDDLE_AMOUNT INT COMMENT '中评',
 HOT_TAGS STRING COMMENT '商品热点标签',
 CREATED_DT VARCHAR(200)
) COMMENT '商品基本信息表，内部表，以写入当天日期分区存储（如20151107）';


#=====================================================

#1.t_m_r_amount
CREATE TABLE IF NOT EXISTS T_M_R_AMOUNT (
 BRAND VARCHAR(200) COMMENT '品牌',
 MODEL VARCHAR(200) COMMENT '型号',
 ASPECT VARCHAR(200) COMMENT '评价纬度',
 ATTR VARCHAR(200),
 CATEGORY_VAL VARCHAR(200) COMMENT '评价得分值',
 AMOUNT VARCHAR(200) COMMENT 'sum总数'
) COMMENT '商品标签表，对同一商品从不同纬度的评价';


#2.t_m_prod_comms
CREATE TABLE IF NOT EXISTS T_M_PROD_COMMS (
 CRAWL_DATE VARCHAR(200) COMMENT '爬取时间',
 ID VARCHAR(200) COMMENT '评论ID',
 PARENT_ID VARCHAR(200) COMMENT '父ID,本表自循环，关联ID',
 PROD_ID VARCHAR(200) COMMENT '评论所属商品ID',
 COMM_INFO TEXT COMMENT '评论内容',
 COMM_TIME VARCHAR(200) COMMENT '买家评论时间',
 COMM_TAGS VARCHAR(1000) COMMENT '评论标签',
 COMM_REPLY_AMOUNT TEXT COMMENT '评论回复',
 COMM_PRAISE_COUNT INT COMMENT '评论被赞数量',
 PUBLISHER_INFO VARCHAR(200) COMMENT '评论发布人信息',
 PROD_INFO VARCHAR(1000) COMMENT '该评论针对的购买信息'
) COMMENT '商品评论表，内部表，以写入当天日期分区存储（如20151107）';


#3.t_m_prod_info
CREATE TABLE IF NOT EXISTS T_M_PROD_INFO (
 CRAWL_DATE VARCHAR(1000) COMMENT '爬取时间',
 SOURCE VARCHAR(1000) COMMENT '数据来源，如JD.COM，TMALL.COM',
 PROD_ID VARCHAR(200) COMMENT '商品ID',
 NAME VARCHAR(1000) COMMENT '商品销售名',
 PRICE FLOAT,
 BRAND VARCHAR(200) COMMENT '品牌',
 MODEL VARCHAR(200) COMMENT '型号',
 COLOR VARCHAR(200),
 CAPACITY VARCHAR(200),
 SCREEN_SIZE VARCHAR(200),
 COMM_AMOUNT INT COMMENT '累计评价,如果不能爬到就先空，计算时自己统计',
 COMM_GOOD_AMOUNT INT COMMENT '好评率 PRAISE RATE 与描述相符||好评度，存4位整数，2120 = 21.20%',
 COMM_BAD_AMOUNT INT COMMENT '差评，存4位整数，2120 = 21.20%',
 COMM_MIDDLE_AMOUNT INT COMMENT '中评',
 HOT_TAGS STRING COMMENT '商品热点标签'
) COMMENT '商品基本信息表，内部表，以写入当天日期分区存储（如20151107）';


CREATE TABLE `PROD_BRAND_MODEL` (
  `MID` int(11) NOT NULL AUTO_INCREMENT,
  `BRAND` varchar(200) DEFAULT NULL,
  `MODEL` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`MID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
COMMENT '本系统中所有商品品牌及型号';

CREATE TABLE `MODEL_ALIAS` (
  `mid` int(11) NOT NULL COMMENT '品牌型号ID',
  `ALIAS` varchar(200) DEFAULT NULL COMMENT '型号别名',
  PRIMARY KEY (`mid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
COMMENT '型号别名';

CREATE TABLE `MODEL_MENTION` (
  `MID` int(11) NOT NULL COMMENT '型号ID',
  `MENTION_MID` int(11) DEFAULT NULL COMMENT '提及的型号ID',
  PRIMARY KEY (`MID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
COMMENT '型号提及其他型号';

CREATE TABLE `M_COMM_MENTION` (
  `CID` int(11) NOT NULL COMMENT '型号ID',
  `BRAND` varchar(200) DEFAULT NULL,
  `MODEL` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`MID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
COMMENT '评论提及型号原始数据';

